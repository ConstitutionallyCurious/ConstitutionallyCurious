<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>The Constitution</title>
  <!-- Google Fonts: Roboto for body, Playfair Display for headings, Jacquard for legacy, WeThePeople custom -->
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&family=Playfair+Display:wght@700&family=Jacquard+24&display=swap" rel="stylesheet">
  <style>
    :root {
      --body-bg: #f9f9f9;
      --card-bg: #fff;
      --primary: #004080;
      --primary-dark: #002f5f;
      --text-main: #333333;
      --accent: #004080;
      --shadow: 0 2px 6px rgba(0, 0, 0, 0.05);
      --border-radius: 8px;
      --sidebar-width: 260px;
      --sidebar-bg: #fff;
      --sidebar-border: #e5e5e5;
      --sidebar-link-hover: #002f5f;
      --sidebar-link-bg-active: #eaf2fb;
      --z-sidebar: 1001;
      --z-topbar: 1010;
      --z-tooltip: 9999;
    }
    html { font-size: 16px; }
    body {
      background: var(--body-bg);
      color: var(--text-main);
      font-family: 'Roboto', Arial, sans-serif;
      line-height: 1.65;
      margin: 0;
      padding: 0;
      min-height: 100vh;
      transition: background 0.3s;
    }
    .main-layout {
      display: flex;
      min-height: 100vh;
    }
    /* Sidebar */
    .sidebar {
      position: sticky;
      top: 0;
      left: 0;
      width: var(--sidebar-width);
      min-height: 100vh;
      background: var(--sidebar-bg);
      border-right: 1px solid var(--sidebar-border);
      box-shadow: 2px 0 8px 0 rgba(0,0,0,0.02);
      padding: 2rem 1rem 2rem 1.5rem;
      z-index: var(--z-sidebar);
      display: flex;
      flex-direction: column;
      gap: 1.5rem;
    }
    .sidebar h2 {
      font-family: 'Playfair Display', serif;
      font-size: 1.3rem;
      margin-bottom: 1.25rem;
      color: var(--primary);
      font-weight: 700;
      letter-spacing: 0.03em;
    }
    .toc-list {
      list-style: none;
      padding: 0;
      margin: 0;
      flex: 1 1 auto;
    }
    .toc-list li {
      margin-bottom: 0.7em;
    }
    .toc-link {
      display: block;
      text-decoration: none;
      color: var(--text-main);
      padding: 0.4em 1.2em 0.4em 0.2em;
      border-radius: 5px;
      font-size: 1rem;
      font-family: 'Roboto', Arial, sans-serif;
      transition: color 0.2s, background 0.2s;
    }
    .toc-link.active,
    .toc-link:focus-visible {
      background: var(--sidebar-link-bg-active);
      color: var(--primary);
      font-weight: bold;
      outline: none;
    }
    .toc-link:hover {
      color: var(--sidebar-link-hover);
      text-decoration: underline;
    }
    .sidebar .close-btn,
    .sidebar .hamburger {
      display: none;
    }
    /* Topbar nav */
    .topbar-nav {
      position: sticky;
      top: 0;
      left: 0;
      z-index: var(--z-topbar);
      background: #e0e0e0;
      box-shadow: 0 2px 8px rgba(0,0,0,0.09);
      border-radius: 2em;
      padding: 0.6em 1.6em 0.8em 1.6em;
      margin: 32px auto 32px auto;
      width: max-content;
      min-width: 230px;
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 2em;
    }
    .topbar-interpretation { display: flex; align-items: center; }
    .toggle-label { font-size: 18px; font-weight: bold; margin-right: 10px; }
    .toggle-switch {
      position: relative;
      width: 50px; height: 25px;
      background-color: #ccc;
      border-radius: 25px;
      cursor: pointer;
      transition: background-color 0.3s;
    }
    .toggle-switch:before {
      content: '';
      position: absolute; top: 3px; left: 3px;
      width: 19px; height: 19px;
      background: #fff; border-radius: 50%;
      transition: transform 0.3s;
    }
    .toggle-switch.active { background: #4caf50; }
    .toggle-switch.active:before { transform: translateX(25px); }
    .topbar-translate {
      display: flex; align-items: center;
    }
    .translate-icon-img {
      width: 32px; height: 32px; object-fit: contain; margin-right: 0.3em;
      background: none; border-radius: 0; box-shadow: none;
    }
    #google_translate_element { background: none !important; }

    /* Main content area */
    .main-content {
      flex: 1 1 auto;
      max-width: 900px;
      margin: 0 auto;
      padding: 2.5rem 2rem 3rem 2rem;
      display: flex;
      flex-direction: column;
    }
    /* Card styling for each article/amendment */
    .card {
      background: var(--card-bg);
      padding: 1.5rem;
      border-radius: var(--border-radius);
      box-shadow: var(--shadow);
      margin-bottom: 2rem;
    }
    .card .jacquard { font-family: 'Jacquard 24', cursive; }
    .wethepeople { font-family: 'WeThePeople', cursive; font-size: 3.0em; }
    @font-face {
      font-family: 'WeThePeople';
      src: url('fonts/WeThePeople.ttf') format('truetype');
      font-weight: bold;
      font-style: normal;
    }
    /* Typography overrides */
    h1, .wethepeople { font-family: 'WeThePeople', cursive; font-size: 2.5rem; }
    h2 { font-family: 'Playfair Display', serif; font-size: 2rem; margin-top: 2.5rem; }
    h3 { font-family: 'Playfair Display', serif; font-size: 1.4rem; margin-top: 1.7rem; }
    p { font-size: 1.125rem; }
    .card h2, .card h3, .card h4, .card h5 { font-family: 'Playfair Display', serif; }
    .interpretation {
      font-size: 1rem;
      color: #666;
      display: block;
      margin-top: 0.5em;
      margin-bottom: 1em;
      font-style: italic;
    }
    /* Tidbit tooltip styles - position absolute, always visible on hover */
    .tidbit-tooltip-wrapper {
      position: relative;
      display: inline-block;
      cursor: pointer;
      vertical-align: baseline;
      z-index: var(--z-tooltip);
    }
    .tidbit-tooltip-box {
      visibility: hidden;
      opacity: 0;
      width: 270px;
      background: #fff;
      color: #222;
      border: 1px solid #888;
      border-radius: 8px;
      box-shadow: 0 4px 24px rgba(0,0,0,0.12);
      padding: 16px;
      font-size: 16px;
      position: absolute;
      top: 100%;
      left: 50%;
      z-index: var(--z-tooltip);
      transform: translate(-50%, 8px);
      transition: opacity 0.15s;
      display: flex;
      flex-direction: column;
      align-items: center;
      min-width: 200px;
      pointer-events: none;
    }
    .tidbit-tooltip-wrapper:hover .tidbit-tooltip-box,
    .tidbit-tooltip-wrapper:focus-within .tidbit-tooltip-box {
      visibility: visible;
      opacity: 1;
      pointer-events: auto;
    }
    .tidbit-tooltip-img { width: 100%; height: 96px; object-fit: cover; border-radius: 6px; margin-bottom: 6px; }
    .tidbit-tooltip-btn {
      background: var(--primary);
      color: #fff;
      border: none;
      border-radius: 4px;
      padding: 6px 18px;
      font-size: 15px;
      cursor: pointer;
      margin-top: 6px;
      transition: background 0.2s, color 0.2s;
      text-decoration: none;
      display: inline-block;
      font-family: 'Roboto', Arial, sans-serif;
      font-weight: 700;
    }
    .tidbit-tooltip-btn:hover {
      background: var(--primary-dark);
      color: #fff;
    }
    .tidbit-tooltip-trigger { border-bottom: 2px dotted #333; outline: none; }
    /* Mobile tap-to-toggle */
    @media (hover: none) and (pointer: coarse) {
      .tidbit-tooltip-box { pointer-events: none; }
      .tidbit-tooltip-wrapper.active .tidbit-tooltip-box {
        visibility: visible;
        opacity: 1;
        pointer-events: auto;
      }
    }
    /* General link styles */
    a, .tidbit-tooltip-btn, .toc-link { color: var(--accent); transition: color 0.2s; }
    a:hover, .tidbit-tooltip-btn:hover, .toc-link:hover { color: var(--primary-dark); text-decoration: underline; }
    /* Responsive for mobile */
    @media (max-width: 1000px) {
      .main-layout { flex-direction: column; }
      .sidebar {
        display: none;
        position: fixed;
        left: 0; top: 0; height: 100vh;
        z-index: var(--z-sidebar);
        background: var(--sidebar-bg);
        box-shadow: 2px 0 8px 0 rgba(0,0,0,0.08);
        width: 80vw; max-width: 320px;
      }
      .sidebar.open { display: flex; }
      .sidebar .close-btn {
        display: block;
        background: none;
        border: none;
        font-size: 1.5rem;
        color: var(--primary);
        align-self: flex-end;
        margin-bottom: 1rem;
        cursor: pointer;
      }
      .hamburger {
        display: inline-flex;
        position: fixed;
        top: 1.3rem; left: 1rem;
        width: 44px; height: 44px;
        background: #fff; border: 1px solid #e0e0e0;
        border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.07);
        z-index: var(--z-topbar) !important;
        align-items: center; justify-content: center;
        cursor: pointer;
      }
      .main-content {
        padding-left: 1rem; padding-right: 1rem;
      }
      .topbar-nav { margin-left: 0; margin-right: 0; }
    }
    @media (max-width: 600px) {
      .main-content { padding: 1rem 0.5rem; }
      .topbar-nav { padding: 0.4em 0.6em; min-width: 120px; font-size: 1em; }
      .amendment-xiii-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 6px;
      }
      .amendment-xiii-chain {
        width: 60px;
        height: 36px;
        margin-bottom: 0.2em;
      }
      .amendment-xiii-portraits {
        gap: 4px;
        margin-left: 0;
      }
      .amendment-xiii-person {
        width: 54px;
        height: 68px;
      }
    }
    /* Amendment XIII images layout */
    .amendment-xiii-header {
      display: flex;
      align-items: flex-start;
      margin-bottom: 0.5em;
      gap: 12px;
    }
    .amendment-xiii-chain {
      width: 80px;
      height: 50px;
      object-fit: contain;
      margin-right: 10px;
      margin-top: 0.1em;
      flex-shrink: 0;
    }
    .amendment-xiii-portraits {
      display: flex;
      align-items: flex-end;
      margin-left: auto;
      gap: 10px;
    }
    .amendment-xiii-person {
      width: 86px;
      height: 110px;
      object-fit: contain;
      background: none;
      border-radius: 0;
      margin: 0;
      box-shadow: none;
    }
  </style>
</head>
<body>
  <button class="hamburger" aria-label="Open menu" tabindex="0" style="display:none;">
    <svg width="30" height="30" viewBox="0 0 30 30"><rect y="7" width="30" height="3" rx="1.5" fill="#004080"/><rect y="14" width="30" height="3" rx="1.5" fill="#004080"/><rect y="21" width="30" height="3" rx="1.5" fill="#004080"/></svg>
  </button>
  <div class="main-layout">
    <!-- Sidebar Navigation -->
    <nav class="sidebar" aria-label="Table of Contents">
      <button class="close-btn" aria-label="Close menu" tabindex="0">&times;</button>
      <h2>Contents</h2>
      <ul class="toc-list">
        <li><a href="#preamble" class="toc-link">We the People</a></li>
        <li><a href="#article-i" class="toc-link">Article I</a></li>
        <li><a href="#article-ii" class="toc-link">Article II</a></li>
        <li><a href="#article-iii" class="toc-link">Article III</a></li>
        <li><a href="#amendment-xiii" class="toc-link">Amendment XIII</a></li>
      </ul>
    </nav>
    <div class="main-content">
      <!-- Top bar -->
      <div class="topbar-nav">
        <div class="topbar-interpretation">
          <span class="toggle-label">Interpretation</span>
          <div class="toggle-switch active"></div>
        </div>
        <div class="topbar-translate">
          <img src="Translateicon.png" alt="Google Translate" class="translate-icon-img">
          <div id="google_translate_element"></div>
        </div>
      </div>
      <!-- Main Content Cards -->
      <section class="card" id="preamble">
        <p>
          <span class="wethepeople">We the People</span> of the United States, in Order to form a more perfect Union...
        </p>
        <span class="interpretation">[Interpretation for the Preamble]</span>
      </section>
      <section class="card" id="article-i">
        <h2>Article I</h2>
        <p>
          To regulate Commerce with foreign Nations, and among the several States, and with the Indian Tribes;
          <span class="tidbit-tooltip-wrapper">
            <span class="tidbit-tooltip-trigger" tabindex="0"><b><u>Naturalization,</u></b></span>
            <span class="tidbit-tooltip-box" role="tooltip">
              <img class="tidbit-tooltip-img" src="https://upload.wikimedia.org/wikipedia/commons/9/9e/Johnadamsvp.flipped.jpg" alt="Tid-bit image">
              <span class="tidbit-tooltip-text">Since 1798 Congress has used this clause in the past to target and deport immigrants based solely on their race or political opinion during times of war or national crisis.</span>
              <a class="tidbit-tooltip-btn btn-bottom" href="https://constitutionallycurious.weebly.com/blog/immigration-the-constitution" target="_blank">Learn More</a>
            </span>
          </span>
          and uniform Laws on the subject of Bankruptcies throughout the United States;
        </p>
      </section>
      <section class="card" id="article-ii">
        <h2>Article II</h2>
        <p>[Your Article II content here]</p>
      </section>
      <section class="card" id="article-iii">
        <h2>Article III</h2>
        <p>[Your Article III content here]</p>
      </section>
      <section class="card" id="amendment-xiii">
        <div class="amendment-xiii-header">
          <img src="chain.png" alt="Broken chain symbolizing freedom" class="amendment-xiii-chain">
          <h2 style="display:inline-block;vertical-align:middle;margin:0 0 0 10px;">Amendment XIII</h2>
          <div class="amendment-xiii-portraits">
            <img src="harriettubman.png" alt="Harriet Tubman" class="amendment-xiii-person harriettubman">
            <img src="frederickdouglass.png" alt="Frederick Douglass" class="amendment-xiii-person frederickdouglass">
            <img src="abrahamlincoln.png" alt="Abraham Lincoln" class="amendment-xiii-person abrahamlincoln">
          </div>
        </div>
        <p>
          No Person shall be a Senator who shall not have attained to the Age of thirty Years, and been nine Years a Citizen of the United States, and who shall not, when elected, be an Inhabitant of that State for which he shall be chosen;
          <span class="tidbit-tooltip-wrapper">
            <span class="tidbit-tooltip-trigger" tabindex="0"><b><u>involuntary servitude</u></b></span>
            <span class="tidbit-tooltip-box" role="tooltip">
              <img class="tidbit-tooltip-img" src="https://designshack.net/wp-content/uploads/placehold.jpg" alt="Tid-bit image">
              <span class="tidbit-tooltip-text">This is a tid-bit about the Constitution.</span>
              <a class="tidbit-tooltip-btn btn-bottom" href="https://example.com" target="_blank">Learn More</a>
            </span>
          </span>, except as a punishment for crime whereof the party shall have been duly convicted, shall exist within the United States...
        </p>
        <span class="interpretation">[Interpretation for Amendment XIII]</span>
      </section>
      <footer class="footer">
        <p>© 2025 Constitutionally Curious</p>
      </footer>
    </div>
  </div>
  <audio id="tooltip-audio" src="selection.mp3" preload="auto"></audio>
  <!-- JS for Interpretation Toggle -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const toggleSwitch = document.querySelector('.toggle-switch');
      const interpretations = document.querySelectorAll('.interpretation');
      function updateInterpretations() {
        const show = toggleSwitch.classList.contains('active');
        interpretations.forEach(el => el.style.display = show ? 'block' : 'none');
      }
      toggleSwitch.addEventListener('click', function() {
        toggleSwitch.classList.toggle('active');
        updateInterpretations();
      });
      updateInterpretations();
    });
  </script>
  <!-- Tooltip sound and proper always-on hover logic -->
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      const audio = document.getElementById('tooltip-audio');
      // always play on hover/focus/click
      document.querySelectorAll('.tidbit-tooltip-trigger').forEach(function(trigger) {
        function playSound() {
          if(audio) {
            audio.currentTime = 0;
            audio.play().catch(()=>{});
          }
        }
        trigger.addEventListener('mouseenter', playSound);
        trigger.addEventListener('focus', playSound);
        trigger.addEventListener('click', playSound);
      });

      // For mobile tap-to-toggle support
      function isTouchDevice() {
        return window.matchMedia('(hover: none) and (pointer: coarse)').matches;
      }
      if (isTouchDevice()) {
        document.querySelectorAll('.tidbit-tooltip-trigger').forEach(function(trigger) {
          trigger.addEventListener('click', function(e) {
            var parent = trigger.closest('.tidbit-tooltip-wrapper');
            if(parent.classList.contains('active')) {
              parent.classList.remove('active');
            } else {
              // Close others
              document.querySelectorAll('.tidbit-tooltip-wrapper.active').forEach(function(other) {
                if(other!==parent) other.classList.remove('active');
              });
              parent.classList.add('active');
            }
          });
        });
        // Tap outside closes all
        document.addEventListener('click', function(e) {
          if(!e.target.closest('.tidbit-tooltip-wrapper')) {
            document.querySelectorAll('.tidbit-tooltip-wrapper.active').forEach(function(el){
              el.classList.remove('active');
            });
          }
        });
      }
    });
  </script>
  <!-- Sidebar: Hamburger menu for mobile, sticky on desktop, highlight current section -->
  <script>
    function closeSidebar() {
      document.querySelector('.sidebar').classList.remove('open');
      document.body.style.overflow = '';
    }
    function openSidebar() {
      document.querySelector('.sidebar').classList.add('open');
      document.body.style.overflow = 'hidden';
    }
    document.addEventListener('DOMContentLoaded', function() {
      const sidebar = document.querySelector('.sidebar');
      const hamburger = document.querySelector('.hamburger');
      const closeBtn = sidebar.querySelector('.close-btn');
      function handleResize() {
        if(window.innerWidth <= 1000) {
          hamburger.style.display = 'inline-flex';
          sidebar.classList.remove('open');
        } else {
          hamburger.style.display = 'none';
          sidebar.classList.remove('open');
          document.body.style.overflow = '';
        }
      }
      handleResize();
      window.addEventListener('resize', handleResize);
      if(hamburger) hamburger.addEventListener('click', openSidebar);
      if(closeBtn) closeBtn.addEventListener('click', closeSidebar);
      sidebar.querySelectorAll('.toc-link').forEach(link => {
        link.addEventListener('click', function() {
          if(window.innerWidth <= 1000) closeSidebar();
        });
      });
    });
    document.addEventListener('DOMContentLoaded', function() {
      const tocLinks = Array.from(document.querySelectorAll('.toc-link'));
      const sectionIds = tocLinks.map(link => link.getAttribute('href').replace('#',''));
      const sections = sectionIds.map(id => document.getElementById(id)).filter(Boolean);
      tocLinks.forEach(link => {
        link.addEventListener('click', function(e) {
          const id = this.getAttribute('href').slice(1);
          const target = document.getElementById(id);
          if (target) {
            e.preventDefault();
            window.scrollTo({
              top: target.getBoundingClientRect().top + window.scrollY - 32,
              behavior: 'smooth'
            });
          }
        });
      });
      if ("IntersectionObserver" in window) {
        let activeIndex = 0;
        const observer = new IntersectionObserver((entries) => {
          let visibleSections = entries.filter(e => e.isIntersecting);
          if (visibleSections.length > 0) {
            visibleSections.sort((a,b)=>a.boundingClientRect.top-b.boundingClientRect.top);
            let idx = sections.indexOf(visibleSections[0].target);
            if (idx !== -1) {
              tocLinks.forEach(l=>l.classList.remove('active'));
              tocLinks[idx].classList.add('active');
            }
          }
        }, { rootMargin: '-40% 0px -50% 0px', threshold: 0.1 });
        sections.forEach(section => observer.observe(section));
      }
    });
  </script>
  <script type="text/javascript">
    function googleTranslateElementInit() {
      new google.translate.TranslateElement({
        pageLanguage: 'en',
        includedLanguages: 'es,zh-CN,zh-TW,ta,te,hi,ar,fr,vi,ko,de,ru,it,pt,ja,pl,fa,gu,ur,tr,bn,ht,el,am,he,th,uk,ro,pa,sr,jv,hu,nl,ckb,sq,yo,ig,so,ha,bg,sw,km,my,hm,om,nav,si,af,sv',
        layout: google.translate.TranslateElement.InlineLayout.SIMPLE
      }, 'google_translate_element');
    }
  </script>
  <script type="text/javascript"
    src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit">
  </script>
</body>
</html>
